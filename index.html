<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FalakZoom</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
      body {
        margin: 0;
        overflow: hidden;
        background: black;
        font-family: Arial, sans-serif;
      }

      #infoPanel {
        position: absolute;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.8);
        color: white;
        padding: 15px;
        border-radius: 8px;
        border: 2px solid rgba(255, 255, 255, 0.5);
        display: none;
        max-width: 350px;
        font-size: 14px;
        font-family: 'Poppins', sans-serif;
        line-height: 1.6;
        text-align: right;
      }

      #closeBtn {
        position: absolute;
        top: 10px;
        left: 10px;
        width: 30px;
        height: 30px;
        font-size: 18px;
        font-weight: bold;
        color: #ff4444;
        cursor: pointer;
        transition: transform 0.3s ease, color 0.3s ease, box-shadow 0.3s ease, background 0.3s ease;
        padding: 0;
        background: transparent;
        border: none;
        border-radius: 5px;
        display: flex;
        justify-content: center;
        align-items: center;
        box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.3);
      }

      #closeBtn:hover {
        color: #ff6666;
        transform: scale(1.15);
        background: rgba(255, 255, 255, 0.2);
        box-shadow: 0px 8px 16px rgba(0, 0, 0, 0.5);
      }
    </style>
  </head>
  <body>
    <div id="infoPanel">
      <span id="closeBtn">X</span>
      <h2 id="planetName"></h2>
      <p id="planetInfo"></p>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/examples/js/controls/OrbitControls.js"></script>
    <script>
      // Scene Setup
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
      camera.position.set(0, 50, 100);
      const renderer = new THREE.WebGLRenderer({ antialias: true });
      renderer.setSize(window.innerWidth, window.innerHeight);
      document.body.appendChild(renderer.domElement);

      // Controls
      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.maxDistance = 300;
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;

      // Advanced Lighting
      const sunLight = new THREE.PointLight(0xffffff, 1.5, 1000);
      sunLight.position.set(0, 0, 0);
      scene.add(sunLight);

      const ambientLight = new THREE.AmbientLight(0x404040, 0.5);
      scene.add(ambientLight);

      const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.3);
      hemiLight.position.set(0, 100, 0);
      scene.add(hemiLight);

      // Texture Loader
      const loader = new THREE.TextureLoader();

      // Starry Background
      const starGeometry = new THREE.BufferGeometry();
      const starCount = 5000;
      const positions = new Float32Array(starCount * 3);
      for (let i = 0; i < starCount; i++) {
        positions[i * 3] = (Math.random() - 0.5) * 2000;
        positions[i * 3 + 1] = (Math.random() - 0.5) * 2000;
        positions[i * 3 + 2] = (Math.random() - 0.5) * 2000;
      }
      starGeometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
      const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.1 });
      const stars = new THREE.Points(starGeometry, starMaterial);
      scene.add(stars);

      // Planets Data with Detailed Information
      const planets = [
        {
          name: "الشمس",
          radius: 5,
          distance: 0,
          speed: 0,
          tilt: 0,
          rotation: 0.01,
          texture: "sun.jpg",
          info: "القطر: 1.391 مليون كيلومتر\nالكتلة: 1.989 × 10³⁰ كيلوغرام\nالعمر: 4.6 مليار سنة\nالنوع: نجم من النوع G في التسلسل الرئيسي"
        },
        {
          name: "عطارد",
          radius: 0.5,
          distance: 10,
          speed: 0.02,
          tilt: 0.034,
          rotation: 0.003,
          texture: "mercury.jpg",
          info: "القطر: 4,879 كيلومتر\nالكتلة: 3.3 × 10²³ كيلوغرام\nالمدار: 88 يومًا\nدرجة حرارة السطح: من -173°C إلى 427°C\nلا يحتوي على غلاف جوي"
        },
        {
          name: "الزهرة",
          radius: 0.8,
          distance: 15,
          speed: 0.007,
          tilt: 177.4,
          rotation: 0.0004,
          texture: "venus.jpg",
          info: "القطر: 12,104 كيلومتر\nالكتلة: 4.87 × 10²⁴ كيلوغرام\nالمدار: 225 يومًا\nدرجة حرارة السطح: 464°C\nغلاف جوي كثيف يحتوي على ثاني أكسيد الكربون"
        },
        {
          name: "الأرض",
          radius: 1,
          distance: 20,
          speed: 0.005,
          tilt: 23.5,
          rotation: 0.05,
          texture: "earth.jpg",
          info: "القطر: 12,742 كيلومتر\nالكتلة: 5.97 × 10²⁴ كيلوغرام\nالمدار: 365.25 يومًا\nدرجة حرارة السطح: من -88°C إلى 58°C\nمغلف بنظام بيئي معقد يحتوي على الحياة"
        },
        {
          name: "المريخ",
          radius: 0.7,
          distance: 25,
          speed: 0.004,
          tilt: 25.2,
          rotation: 0.048,
          texture: "mars.jpg",
          info: "القطر: 6,792 كيلومتر\nالكتلة: 6.42 × 10²³ كيلوغرام\nالمدار: 687 يومًا\nدرجة حرارة السطح: من -153°C إلى 20°C\nغلاف جوي رقيق"
        },
        {
          name: "المشتري",
          radius: 2.5,
          distance: 35,
          speed: 0.002,
          tilt: 3.1,
          rotation: 0.1,
          texture: "jupiter.jpg",
          info: "القطر: 139,820 كيلومتر\nالكتلة: 1.898 × 10²⁷ كيلوغرام\nالمدار: 11.86 سنة\nدرجة حرارة السطح: -145°C\nعملاق غازي\nأكبر الكواكب في المجموعة الشمسية"
        },
        {
          name: "زحل",
          radius: 2,
          distance: 45,
          speed: 0.0015,
          tilt: 26.7,
          rotation: 0.09,
          texture: "saturn.jpg",
          info: "القطر: 116,460 كيلومتر\nالكتلة: 5.68 × 10²⁶ كيلوغرام\nالمدار: 29.46 سنة\nدرجة حرارة السطح: -184°C\nيتميز بحلقاته البارزة المكونة من الجليد والغبار"
        },
        {
          name: "أورانوس",
          radius: 1.5,
          distance: 55,
          speed: 0.0008,
          tilt: 97.8,
          rotation: 0.06,
          texture: "uranus.jpg",
          info: "القطر: 50,724 كيلومتر\nالكتلة: 8.68 × 10²⁵ كيلوغرام\nالمدار: 84 سنة\nدرجة حرارة السطح: -224°C\nعملاق جليدي\nيدور حول محوره بشكل مائل"
        },
        {
          name: "نبتون",
          radius: 1.5,
          distance: 65,
          speed: 0.0006,
          tilt: 28.3,
          rotation: 0.07,
          texture: "neptune.jpg",
          info: "القطر: 49,244 كيلومتر\nالكتلة: 1.02 × 10²⁶ كيلوغرام\nالمدار: 164.8 سنة\nدرجة حرارة السطح: -214°C\nالجو مكون من الهيدروجين والهيليوم والميثان"
        }
      ];

      // Function to Create Planets
      function createPlanet(planetData) {
        const texture = loader.load(`models/${planetData.texture}`);
        const material = new THREE.MeshPhongMaterial({
          map: texture,
          emissive: planetData.name === "الشمس" ? 0xffcc00 : 0x000000,
          emissiveIntensity: planetData.name === "الشمس" ? 1 : 0
        });

        const geometry = new THREE.SphereGeometry(planetData.radius, 32, 32);
        const planet = new THREE.Mesh(geometry, material);
        planet.position.set(planetData.distance, 0, 0);
        scene.add(planet);

        // Planet Orbit (optional)
        const orbit = new THREE.Group();
        orbit.add(planet);
        scene.add(orbit);

        // Rotation and Revolution Animation
        function animatePlanet() {
          planet.rotation.y += planetData.rotation;
          orbit.rotation.y += planetData.speed;
        }

        return {
          planet,
          orbit,
          animatePlanet
        };
      }

      // Create all Planets
      const planetObjects = planets.map(createPlanet);

      // Event Listeners for Info Panel
      const infoPanel = document.getElementById('infoPanel');
      const planetNameElem = document.getElementById('planetName');
      const planetInfoElem = document.getElementById('planetInfo');
      const closeBtn = document.getElementById('closeBtn');

      function showInfo(planetData) {
        planetNameElem.textContent = planetData.name;
        planetInfoElem.textContent = planetData.info;
        infoPanel.style.display = 'block';
      }

      closeBtn.addEventListener('click', () => {
        infoPanel.style.display = 'none';
      });

      // Planet Click Listener
      window.addEventListener('click', (event) => {
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();

        // Normalize mouse coordinates
        mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
        mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;

        raycaster.setFromCamera(mouse, camera);

        const intersects = raycaster.intersectObjects(planetObjects.map(obj => obj.planet));

        if (intersects.length > 0) {
          const planet = intersects[0].object;
          const planetData = planets.find(p => p.name === planet.name);
          if (planetData) showInfo(planetData);
        }
      });

      // Animation Loop
      function animate() {
        requestAnimationFrame(animate);

        planetObjects.forEach(obj => obj.animatePlanet());

        controls.update();
        renderer.render(scene, camera);
      }

      animate();
    </script>
  </body>
</html>
